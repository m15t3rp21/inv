@using DNRPS.POIMS.CommonResources;
@using DNRPS.POIMS.CommonResources.Models;
@using DNRPS.POIMS.Web.Models;
@model DNRPS.POIMS.CommonResources.Models.DataArchiveConfigurationModel


@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="form_field">
    <div class="titlebg">
        <h2>@Names.DataArchiveConfiguration</h2>
    </div>
    <div class="content_block">

        @(Html.Kendo().Grid<DNRPS.POIMS.CommonResources.Models.DataArchiveConfigurationModel>()
                .Name("grid")
                .Columns(columns =>
                {
                    columns.Bound(c => c.RetentionType).ClientTemplate(
                            @"<div class='retentionType-image'
                                style='background-image: url(../../content/web/Customers/#:data.CustomerID#.jpg);'></div>
                            <div class='tank-name'>#: Retention Type #</div>")
                      .Width(240);
                    columns.Bound(c => c.RetentionValue);
                    columns.Bound(c => c.LastUpdatedTS);
                })
                .HtmlAttributes(new { style = "height: 550px;" })
                .ToolBar(tools => tools.Excel())
                .Scrollable()
                .Groupable()
                .Sortable()
                .Excel(excel => excel
                    .FileName("TagsExport.xlsx")
                    .Filterable(true)
                    .ProxyURL(Url.Action("Excel_Export_Save", "Grid"))
                )
                .Pageable(pageable => pageable
                    .Refresh(true)
                    .PageSizes(true)
                    .ButtonCount(5))
                .DataSource(dataSource => dataSource
                    .Ajax()
                    .Read(read => read.Action("ArchiveData_Read", "Grid"))
                    .PageSize(20)
                )
        )

        <style>
            .retentionType-image {
                display: inline-block;
                width: 32px;
                height: 32px;
                border-radius: 50%;
                background-size: 32px 35px;
                background-position: center center;
                vertical-align: middle;
                line-height: 32px;
                box-shadow: inset 0 0 1px #999, inset 0 0 10px rgba(0,0,0,.2);
                margin-left: 5px;
            }

            .tank-name {
                display: inline-block;
                vertical-align: middle;
                line-height: 32px;
                padding-left: 3px;
            }
        </style>
    </div>
</div>

